<source>
  @type tail
  path /opt/recipe.json
  tag progetto.recipes
  read_from_head true
  <parse>
    @type json
    time_key time
    time_format %iso8601
  </parse>
</source>

# accept all log events regardless of tag and write them to the console
<match progetto.recipes>
	@type kafka2	
	brokers 10.0.100.23:9092 

	#topic 
	topic_key	Recipes


	default_topic Recipes
	default_partition_key recipe
  	default_message_key   recipe
	output_data_type json

	use_event_time true	

	<inject>
    	time_key time
  	</inject>

	<buffer topic>
		@type file		
		path /var/log/td-agent/buffer/td		
		flush_interval 3s
	</buffer>	

	<format>
	  @type json
	</format>

	compression_codec gzip
</match>

